{% extends 'base.html' %} {% block content %}

<div class="container-fluid">

    <div class="row">
        <div class="recipe col-md-6 offset-md-3">
            <h2 class="text-center">{{recipe.recipe_name|title}}</h2>
            <img src="{{recipe.photo_url}}" class="card-img-display" alt="{{recipe.recipe_name}}">
            <ul class="list-group list-group-flush text-center">
                <li class="list-group-item"><i class="fas fa-utensils"></i><strong> Servings:</strong><span class="recipe-stats"> {{recipe.servings}} </span></li>
                <li class="list-group-item"><i class="far fa-clock"></i><strong> Preptime:</strong><span class="recipe-stats"> {{recipe.preptime}}</span></li>
                <li class="list-group-item"><i class="fas fa-burn"></i><strong> Calories:</strong><span class="recipe-stats"> {{recipe.calories}}</span></li>

                <li class="list-group-item"><i class="fas fa-tags"></i>
                    <strong>Tags:</strong> 
                    {% for tag in recipe.tags %}
                    <span class="recipe-stats"> #{{ tag|title }}</span> 
                    {% endfor %}
                </li>
                <li class="list-group-item"><i class="fas fa-user"></i><strong> Added by:</strong><span class="recipe-stats"> {{ recipe.author.username|title }}</span></li>
            </ul>

            <div class="recipe-buttons text-center">

                {% if session.user %}
                <a role="button" class="btn btn-primary" href="{{url_for('add_to_favourites', recipe_id=recipe._id)}}">Add to Favourites</a>
                <a role="button" class="btn btn-info" href="{{url_for('edit_recipe', recipe_id=recipe._id)}}">Edit Recipe</a>
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deletemodal">Delete Recipe</button> 
                {% else %}
                <a role="button" class="btn btn-primary disabled" href="#">Save Recipe</a>
                <a role="button" class="btn btn-info disabled" href="#">Edit Recipe</a>
                <a role="button" class="btn btn-danger disabled" href="#">Delete Recipe</a>
                <p class="text-muted"><em>You must be logged in to Edit or Delete a recipe!</em></p>
                {% endif %}
            </div>

            <div class="recipe-heading">
                <strong>Ingredients:</strong>
                <ul>
                    {% for ingredient in recipe.ingredients %}
                    <li class="ingredients">{{ingredient}}</li>
                    {% endfor %}
                </ul>
            </div>
            <div class="recipe-heading">
                <strong>Instructions:</strong>
                <ul>
                    <li class="instructions">{{recipe.instructions}}</li>
                </ul>
            </div>

            <div class="recipe-heading">
                <strong>Nutritional Info:</strong>
                <ul class="nutritional-info">
                    <li>
                        Fats: {{ recipe.fat }}
                    </li>
                    <li>
                        SatFats: {{ recipe.satfat }}
                    </li>
                    <li>
                        Carbs: {{ recipe.carbs }}
                    </li>
                    <li>
                        Fiber: {{ recipe.fiber }}
                    </li>
                    <li>
                        Sugar: {{ recipe.sugar }}
                    </li>
                    <li>
                        Protein: {{ recipe.protein }}
                    </li>
                </ul>
            </div>
        </div>
    </div>


    <div class="modal fade" id="deletemodal" tabindex="-1" role="dialog" aria-labelledby="deleterecipe" aria-hidden="true">
        <div class="modal-dialog " role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title text-center ">Delete Recipe</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p class="delete-warning"><span style="color:#d23430"><i class="fas fa-exclamation-circle"></i><strong> WARNING</strong>:</span> Deleting this recipe will permanently remove it from the website for all users.
                    <br>Are you sure you want to permamently delete this recipe?</p>
                </div>
                <div class="delete-buttons text-center">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No, Go Back</button>
                    <a role="button" href="{{url_for('delete_recipe', recipe_id=recipe._id)}}" class="btn btn-danger">Yes, Delete</a>
                </div>
            </div>
        </div>
    </div>


</div>

{% endblock %}
