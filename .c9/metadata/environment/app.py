{"changed":true,"filter":false,"title":"app.py","tooltip":"/app.py","value":"import os, math, datetime, pprint\nfrom flask import Flask, render_template, redirect, request, url_for, session, flash, jsonify, json\nfrom flask_pymongo import PyMongo, pymongo\nfrom bson.objectid import ObjectId\nfrom werkzeug.security import generate_password_hash, check_password_hash\n\napp = Flask(__name__)\n\napp.config['MONGO_DBNAME'] = 'myRecipeDB'\napp.config['MONGO_URI'] = os.getenv(\"MONGO_URI\")\napp.config['SECRET_KEY'] = os.environ.get(\"SECRET_KEY\")\n\nmongo = PyMongo(app)\n\n# Collections\nusers = mongo.db.users\nrecipes = mongo.db.recipes\ndeleted = mongo.db.deleted\n\n@app.route('/')\ndef intro():\n    \"\"\"\n    Intro Page for the Website. Invites users to Start Browsing, Sign-In or Register a new account\n    \"\"\"\n    return render_template(\"intro.html\")\n    \n@app.route('/get_recipes')    \ndef get_recipes():\n    \"\"\"\n    Main Page for the Website. Displays all the recipes with pagination. Also features a Most Popular section.\n    \"\"\"\n    \n    # Pagination \n    \n    # # Recipes per page\n    p_limit = 9\n    current_page = int(request.args.get('current_page', 1))\n    collection = mongo.db.recipes.count()\n    pages = range(1, int(math.ceil(collection / p_limit)) + 1)\n    total_page_no = int(math.ceil(collection/p_limit))\n    recipes = mongo.db.recipes.find().skip((current_page -1)*p_limit).limit(p_limit)\n    \n    \n    # # Most Liked/Favourited Recipes\n    # recommended = users.aggregate( [ \n    #       { \"$unwind\": \"$favourite_recipes\" },\n    #       {\"$group\": {\"_id\": {\"link\": \"$favourite_recipes._id\",\n    #                           \"recipe_name\": \"$favourite_recipes.recipe_name\",\n    #                           \"photo_url\": \"$favourite_recipes.photo_url\",\n    #                           \"servings\": \"$favourite_recipes.servings\",\n    #                           \"preptime\": \"$favourite_recipes.preptime\",\n    #                           \"calories\": \"$favourite_recipes.calories\"\n    #       }, \"number\": {\"$sum\": 1}}},\n    #       { \"$sort\": { \"number\" : -1 } },\n    #       { \"$limit\" : 3 }\n    #       ] )\n          \n    # recommended = users.aggregate( [ \n    #       { \"$unwind\": \"$favourite_recipes\" },\n    #       {\"$group\": {\"_id\": {\"_id\": \"$favourite_recipes._id\"}, \n    #       \"number\": {\"$sum\": 1}}},\n    #       { \"$sort\": { \"number\" : -1 } },\n    #       { \"$limit\" : 3 },\n    #       { \"$project\": {\"_id._id\" : True }}\n    #       ] )\n          \n    \n    \n    # for x in recommended:\n    #     rec = x[\"_id\"]\n    #     favlist = []\n    #     new = favlist.append(rec)\n    #     # for y in favlist:\n    #     favs = mongo.db.recipes.find({\"_id\" : {\n    #                                 \"$in\" : rec }\n    #                         });\n    #     for f in favs:\n    #         print(f)\n                          \n    return render_template(\"showall.html\", recipes=recipes, current_page=current_page, pages=pages, total_page_no=total_page_no)\n    \n    \n@app.route('/search')\ndef search():\n    \"\"\"\n    Search Results Page. Uses MongoDB's wildcard text search to search for any words that appear in the recipes that are searched.\n    The results are then paginated. If there are no results for the user's query, the Most Popular section appears as a suggestion.\n    \"\"\"\n    # Wildcard text search index\n    mongo.db.recipes.create_index([(\"$**\", pymongo.TEXT)])\n    #  Results per page\n    p_limit = 9\n    current_page = int(request.args.get('current_page', 1))\n    #  Input term for search query\n    word_search = request.args.get('word_search')\n    #  Results for search sorted by ID\n    results = mongo.db.recipes.find({'$text': {'$search': str(word_search) }}, {\"score\": {\"$meta\": 'textScore'}}).sort('_id', pymongo.ASCENDING).skip((current_page -1)*p_limit).limit(p_limit)\n    # Pagination\n    results_count = mongo.db.recipes.find({'$text': {'$search': str(word_search) }}).count()\n    results_pages = range(1, int(math.ceil(results_count / p_limit)) + 1)\n    total_page_no = int(math.ceil(results_count/p_limit))\n    \n    # Most Popular recipes - appear when there are no results to the user's query\n    # recommended = users.aggregate( [ \n    #       { \"$unwind\": \"$favourite_recipes\" },\n    #       {\"$group\": {\"_id\": {\"link\": \"$favourite_recipes._id\",\n    #                           \"recipe_name\": \"$favourite_recipes.recipe_name\",\n    #                           \"photo_url\": \"$favourite_recipes.photo_url\",\n    #                           \"servings\": \"$favourite_recipes.servings\",\n    #                           \"preptime\": \"$favourite_recipes.preptime\",\n    #                           \"calories\": \"$favourite_recipes.calories\"\n    #       }, \"number\": {\"$sum\": 1}}},\n    #       { \"$sort\": { \"number\" : -1 } },\n    #       { \"$limit\" : 3 }\n    #       ] )\n    \n    return render_template(\"search.html\", \n                            p_limit = p_limit,\n                            current_page=current_page, \n                            results_count=results_count,\n                            word_search=word_search,\n                            results=results,\n                            results_pages=results_pages,\n                            total_page_no=total_page_no)    \n    \n    \n@app.route('/recipe_display/<recipe_id>')\ndef recipe_display(recipe_id):\n    \n    \"\"\"\n    Displays the recipe on a page of its own.\n    \"\"\"\n    \n    recipe = mongo.db.recipes.find_one({'_id':ObjectId(recipe_id)})\n    return render_template('recipe_display.html', recipe=recipe)\n    \n\n    \n    \n@app.route('/edit_recipe/<recipe_id>')\ndef edit_recipe(recipe_id):\n    \"\"\"\n    Path to edit the recipe currently being viewed. User is brought to a form page based on the recipe's current fields.\n    \"\"\"\n    \n    # Checks if user is in session\n    if 'user' in session:\n    \n        recipe = mongo.db.recipes.find_one({'_id': ObjectId(recipe_id)})\n        \n    else:\n        flash(\"You must be logged in to Edit, Save or Delete a recipe!\")\n        return redirect(url_for('get_recipes')) \n    \n    return render_template('editrecipe.html', recipe=recipe)\n    \n@app.route('/update_recipe/<recipe_id>', methods=[\"POST\"])\ndef update_recipe(recipe_id):\n    \"\"\"\n    Updates the recipe when the user submits the form displayed on the edit page.\n    \"\"\"\n    \n    # Captures the form data and updates the recipe.\n    recipes.update_one({'_id':ObjectId(recipe_id), \n    }, {\n        '$set': {\n    'recipe_name':request.form.get('recipe_name'),\n    'photo_url':request.form.get('photo_url'),\n    'preptime': request.form.get('preptime'),\n    'servings': request.form.get('servings'),\n    'calories':request.form.get('calories'),\n    'fat':request.form.get('fat'),\n    'satfat':request.form.get('satfat'),\n    'carbs':request.form.get('carbs'),\n    'fiber':request.form.get('fiber'),\n    'sugar':request.form.get('sugar'),\n    'protein':request.form.get('protein'),\n    'ingredients':request.form.getlist('ingredients'),\n    'instructions':request.form.get('instructions'),\n    'tags':request.form.getlist('tags')\n    }\n    })\n                   \n                                                        \n    # Returns back to the recipe after update.\n    flash('Recipe updated.')\n    return redirect(url_for('recipe_display', recipe_id=recipe_id))\n\n\n@app.route('/add_recipe')\ndef add_recipe():\n    \"\"\"\n    Path to add a new recipe. User is brought to an empty form page.\n    \"\"\"\n    \n    recipes=mongo.db.recipes.find()\n    return render_template('addrecipe.html', recipes=recipes)\n    \n@app.route('/insert_recipe', methods=[\"POST\"])\ndef insert_recipe():  \n    \"\"\"\n    Inserts new recipe to the Recipes collection when user submits the form from the add_recipe page.\n    \"\"\"\n    \n    recipes = mongo.db.recipes\n    # Identifies the current user in order to capture the author of the new recipe.\n    user = users.find_one({\"username\": session['user']})\n    new_recipe = recipes.insert_one({\n        'recipe_name':request.form.get('recipe_name'),\n        'photo_url':request.form.get('photo_url'),\n        'preptime': request.form.get('preptime'),\n        'servings': request.form.get('servings'),\n        'calories':request.form.get('calories'),\n        'fat':request.form.get('fat'),\n        'satfat':request.form.get('satfat'),\n        'carbs':request.form.get('carbs'),\n        'fiber':request.form.get('fiber'),\n        'sugar':request.form.get('sugar'),\n        'protein':request.form.get('protein'),\n        'ingredients':request.form.getlist('ingredients'),\n        'instructions':request.form.get('instructions'),\n        'tags':request.form.getlist('tags'),\n        'added_on' : datetime.datetime.utcnow(), \n        'author' : {\n            '_id': user['_id'],\n            'username': user['username']}\n    })\n    \n    # Returns the new recipe after insertion.\n    flash('Recipe Added.')\n    return redirect(url_for('recipe_display', recipe_id = new_recipe.inserted_id))\n    \n    \n@app.route('/delete_recipe/<recipe_id>')\ndef delete_recipe(recipe_id):\n    \"\"\"\n    Deletes the recipe currently being viewed but first adds the recipe to a collection called Deleted. \n    This allows the site Admin to reinstate the recipe if they see fit. \n    \"\"\"\n    \n    # Checks if the user is in session\n    if 'user' in session:\n        # # Identifies the current user in order to identify who has deleted the recipe.\n        user = users.find_one({\"username\": session['user']})\n            \n        deleted_recipe = recipes.find_one({'_id': ObjectId(recipe_id)})\n        # # Inserts recipe to be deleted into Deleted collection\n        deleted.insert_one(deleted_recipe)\n        # # Updates the deleted recipe by identifying who has deleted it and when\n        deleted.update_one({'_id': ObjectId(recipe_id)}, \n                                                {\"$set\" :\n                                                    {\"deleted_on\" : datetime.datetime.utcnow(), \n                                                    \"deleted_by\" : {\n                                                                '_id': user['_id'],\n                                                                'username': user['username']}}\n                                                })\n        # Removes the recipe from the Recipes collection\n        recipes.remove({'_id': ObjectId(recipe_id)})\n        \n        \n        # Removes the deleted recipe from Users Favourites.\n        users.update({}, \n                    {\"$pull\": {\"favourite_recipes\": ObjectId(recipe_id)}},\n                    multi=True)\n        \n    else:\n        flash(\"You must be logged in to Edit, Save or Delete a recipe!\")\n        return redirect(url_for('get_recipes'))\n    \n    \n    flash('Recipe Deleted.')\n    return redirect(url_for('get_recipes')) \n    \n@app.route('/deleted_recipe_display/<recipe_id>')\ndef deleted_recipe_display(recipe_id):\n    \n    \"\"\"\n    Displays the recipe on a page of its own.\n    \"\"\"\n    \n    deleted_recipe = mongo.db.deleted.find_one({'_id':ObjectId(recipe_id)})\n    return render_template('deleted_recipe_display.html', deleted_recipe=deleted_recipe)    \n    \n    \n@app.route('/add_to_favourites/<recipe_id>', methods=[\"GET\", \"POST\"])\ndef add_to_favourites(recipe_id):\n    \"\"\"\n    Adds the current recipe to the current users \"Favourites\" array in the Users collection. \n    \"\"\"\n    # Checks if user is in session\n    if 'user' in session:\n        # Identifies the current user \n        user = users.find_one({\"username\": session['user']})\n        \n        favourites = user['favourite_recipes']\n        \n        # Makes sure the recipe is not already in the user's favourites and then adds to favourites\n        if ObjectId(recipe_id) not in favourites:\n            users.update_one({\"username\": session['user']}, \n                                                    {\"$push\" :\n                                                        {\"favourite_recipes\" : ObjectId(recipe_id)}})\n        else:\n            # If the recipe is already in the User's favourites, the below message is displayed\n            flash(\"You have already added this recipe to your Favourites\")\n            return redirect(url_for('recipe_display', user=user['username'], recipe_id=recipe_id))\n    else:\n        flash(\"You must be logged in to Edit, Save or Delete a recipe!\")\n        return redirect(url_for('get_recipes'))\n    \n    \n    flash('Added to My Favourites.')\n    return redirect(url_for('recipe_display', user=user['username'], recipe_id=recipe_id))\n\n@app.route('/remove_from_favourites/<recipe_id>', methods=[\"GET\", \"POST\"])\ndef remove_from_favourites(recipe_id):\n    \"\"\"\n    Removes the current recipe from the current users \"Favourites\" array in the Users collection. \n    \"\"\"\n    # Identifies the current user \n    user = users.find_one({\"username\": session['user']})\n    \n    favourites = user['favourite_recipes']\n        \n            \n    # Identifies the recipe to be removed from the user's favourite\n    # remove_recipe = recipes.find_one({'_id': ObjectId(recipe_id)})\n        \n    # Removes recipe from user's favourites\n    if ObjectId(recipe_id) in favourites:\n        users.update({\"username\": session['user']}, \n                                                {\"$pull\" :\n                                                    {\"favourite_recipes\" : ObjectId(recipe_id)}})\n        flash('Removed from My Favourites.')\n        return redirect(url_for('my_favourites', user=user['username'], recipe_id=recipe_id))\n            \n                                                        \n    else:\n        flash(\"You must be logged in to Edit, Save or Delete a recipe!\")\n        return redirect(url_for('get_recipes'))\n        \n    \n    \n# Login - taken and modified from Miroslav Svec's (username Miro) sessions from Slack DCD channel\n@app.route('/login', methods=['GET'])\ndef login():\n    \"\"\"\n    Logs the user into the website. \n    \"\"\"\n    \n    # Check if user is not logged in already\n    if 'user' in session:\n        user_in_db = users.find_one({\"username\": session['user']})\n        if user_in_db:\n            # If so redirect user to their \"My Favourites\" page\n            flash(\"You are logged in already!\")\n            return redirect(url_for('my_favourites', user=user_in_db['username']))\n    else:\n        # Render the page for user to be able to log in\n        return render_template(\"login.html\")\n\n\n# # Taken and modified from Miroslav Svec's (username Miro) sessions from Slack DCD channel\n@app.route('/user_auth', methods=['POST'])\ndef user_auth():\n    \"\"\"\n    Checks user login details from login form\n    \"\"\"\n    \n    form = request.form.to_dict()\n    user_in_db = users.find_one({\"username\": form['username']})\n    # Check for user in database\n    if user_in_db:\n        # If passwords match (hashed / real password)\n        if check_password_hash(user_in_db['password'], form['user_password']):\n            # Log user in (add to session)\n            session['user'] = form['username']\n            # If the user is admin redirect him to admin area\n            if session['user'] == \"admin\":\n                return redirect(url_for('admin'))\n            else:\n                flash(\"You were logged in!\")\n                return redirect(url_for('my_favourites', user=user_in_db['username']))\n\n        else:\n            flash(\"Wrong password or user name!\")\n            return redirect(url_for('login'))\n    else:\n        flash(\"You must be registered!\")\n        return redirect(url_for('register'))\n\n# Sign up - taken and modified from Miroslav Svec's (username Miro) sessions from Slack DCD channel\n@app.route('/register', methods=['GET', 'POST'])\ndef register():\n    \"\"\"\n    Registers new users to the website.\n    \"\"\"\n    \n    # Check if user is not logged in already\n    if 'user' in session:\n        flash('You are already signed in!')\n        return redirect(url_for('get_recipes'))\n    if request.method == 'POST':\n        form = request.form.to_dict()\n        # Check if the password and password1 actually match\n        if form['user_password'] == form['user_password1']:\n            # If so try to find the user in db\n            user = users.find_one({\"username\": form['username']})\n            if user:\n                flash(\"That username already exists!\")\n                return redirect(url_for('register'))\n            # If user does not exist register new user\n            else:\n                # Hash password\n                hash_pass = generate_password_hash(form['user_password'])\n                # Create new user with hashed password\n                users.insert_one(\n                    {\n                        'username': form['username'],\n                        'email': form['email'],\n                        'password': hash_pass,\n                        'favourite_recipes': []\n                    }\n                )\n                # Check if user is actually saved\n                user_in_db = users.find_one(\n                    {\"username\": form['username']})\n                if user_in_db:\n                    # Log user in (add to session)\n                    session['user'] = user_in_db['username']\n                    return redirect(url_for('my_favourites', user=user_in_db['username']))\n                else:\n                    flash(\"There was a problem saving your profile\")\n                    return redirect(url_for('register'))\n\n        else:\n            flash(\"Passwords dont match!\")\n            return redirect(url_for('register'))\n\n    return render_template(\"register.html\")\n\n# Log out- taken and modified from Miroslav Svec's (username Miro) sessions from Slack DCD channel\n@app.route('/logout')\ndef logout():\n    \"\"\"\n    Logs the users out of the session\n    \"\"\"\n    \n    \n    # Clear the session\n    session.clear()\n    flash('You have been logged out!')\n    return redirect(url_for('get_recipes'))\n    \n    \n@app.route('/profile/<user>')\ndef profile(user):\n    \"\"\"\n    Users Profile page displays the recipes the user has created.\n    \"\"\"\n    \n    users_profile = users.find({'username': user})\n    \n    # Pagination if Users recipes exceed 9 recipes per page\n    \n    # Results per page\n    p_limit = 9\n    current_page = int(request.args.get('current_page', 1))\n    users_recipes_count = recipes.find({'author.username': user}).count()\n    pages = range(1, int(math.ceil(users_recipes_count / p_limit)) + 1)\n    total_page_no = int(math.ceil(users_recipes_count/p_limit))\n    users_recipes = recipes.find({'author.username': user}).skip((current_page -1)*p_limit).limit(p_limit)\n\n    \n    return render_template('profile.html', user=user, \n                                           users_profile=users_profile, \n                                           users_recipes=users_recipes,\n                                           users_recipes_count=users_recipes_count,\n                                           current_page=current_page, pages=pages, total_page_no=total_page_no)\n\n\n    \n#  Taken and modified from Miroslav Svec's (username Miro) sessions from Slack DCD channel\n@app.route('/my_favourites/<user>')\ndef my_favourites(user):\n    \"\"\"\n    My Favourites Page displays all the recipes the user has added as their favourites. \n    \"\"\"\n    # Check if user is logged in\n    if 'user' in session:\n        user_in_db = users.find_one({\"username\": user})\n        favourites = mongo.db.users.find(user_in_db)\n        \n        favourites_recipes = user_in_db[\"favourite_recipes\"]\n        \n        favs = recipes.find({\"_id\" : {\n                                    \"$in\" : favourites_recipes }\n                            });\n                            \n        \n        \n        \n    else:\n        flash(\"You must be logged in!\")\n        return redirect(url_for('get_recipes'))\n        \n    return render_template('my_favourites.html', user=user_in_db, favourites=favourites, favourites_recipes=favourites_recipes, favs=favs)\n    \n    \n        \n        \n\n@app.route('/admin')\ndef admin():\n    \"\"\"\n    Admin area. Allows the Admin to check on statistics about the Users, Recipes and Deleted recipes collections.\n    \"\"\"\n    # Check if user is logged in\n    if 'user' in session:\n        \n        \n        # Checks if user is the Admin\n        if session['user'] == \"admin\":\n            # Queries for Admin reports\n            users = mongo.db.users.find()\n            recipes = mongo.db.recipes.find()\n            deleted = mongo.db.deleted.find()\n            \n            \n            return render_template('admin.html', users=users, recipes=recipes, deleted=deleted)\n        else:\n            flash('Only Admins can access this page!')\n            return redirect(url_for('get_recipes'))\n    else:\n        flash('You must be logged')\n        return redirect(url_for('get_recipes'))\n    \nif __name__ == '__main__':\n    app.run(host=os.environ.get('IP'),\n            port=int(os.environ.get('PORT')),\n            debug=True),","undoManager":{"mark":-2,"position":100,"stack":[[{"start":{"row":74,"column":48},"end":{"row":74,"column":49},"action":"remove","lines":["_"],"id":2810},{"start":{"row":74,"column":47},"end":{"row":74,"column":48},"action":"remove","lines":["s"]}],[{"start":{"row":73,"column":12},"end":{"row":73,"column":19},"action":"remove","lines":["favs = "],"id":2811}],[{"start":{"row":72,"column":8},"end":{"row":72,"column":10},"action":"insert","lines":["# "],"id":2812}],[{"start":{"row":73,"column":8},"end":{"row":73,"column":12},"action":"remove","lines":["    "],"id":2813}],[{"start":{"row":73,"column":8},"end":{"row":73,"column":9},"action":"insert","lines":["f"],"id":2814},{"start":{"row":73,"column":9},"end":{"row":73,"column":10},"action":"insert","lines":["o"]},{"start":{"row":73,"column":10},"end":{"row":73,"column":11},"action":"insert","lines":["r"]}],[{"start":{"row":73,"column":11},"end":{"row":73,"column":12},"action":"insert","lines":[" "],"id":2815},{"start":{"row":73,"column":12},"end":{"row":73,"column":13},"action":"insert","lines":["y"]}],[{"start":{"row":73,"column":13},"end":{"row":73,"column":14},"action":"insert","lines":[" "],"id":2816},{"start":{"row":73,"column":14},"end":{"row":73,"column":15},"action":"insert","lines":["i"]},{"start":{"row":73,"column":15},"end":{"row":73,"column":16},"action":"insert","lines":["n"]}],[{"start":{"row":73,"column":16},"end":{"row":73,"column":17},"action":"insert","lines":[" "],"id":2817}],[{"start":{"row":75,"column":31},"end":{"row":76,"column":0},"action":"insert","lines":["",""],"id":2818},{"start":{"row":76,"column":0},"end":{"row":76,"column":28},"action":"insert","lines":["                            "]}],[{"start":{"row":75,"column":31},"end":{"row":75,"column":32},"action":"insert","lines":[":"],"id":2819}],[{"start":{"row":75,"column":32},"end":{"row":76,"column":0},"action":"insert","lines":["",""],"id":2820},{"start":{"row":76,"column":0},"end":{"row":76,"column":32},"action":"insert","lines":["                                "]}],[{"start":{"row":76,"column":32},"end":{"row":76,"column":33},"action":"insert","lines":["p"],"id":2821},{"start":{"row":76,"column":33},"end":{"row":76,"column":34},"action":"insert","lines":["r"]},{"start":{"row":76,"column":34},"end":{"row":76,"column":35},"action":"insert","lines":["i"]},{"start":{"row":76,"column":35},"end":{"row":76,"column":36},"action":"insert","lines":["n"]},{"start":{"row":76,"column":36},"end":{"row":76,"column":37},"action":"insert","lines":["t"]}],[{"start":{"row":76,"column":37},"end":{"row":76,"column":39},"action":"insert","lines":["()"],"id":2822}],[{"start":{"row":76,"column":38},"end":{"row":76,"column":39},"action":"insert","lines":["y"],"id":2823}],[{"start":{"row":73,"column":8},"end":{"row":73,"column":17},"action":"remove","lines":["for y in "],"id":2824},{"start":{"row":73,"column":8},"end":{"row":73,"column":9},"action":"insert","lines":["f"]},{"start":{"row":73,"column":9},"end":{"row":73,"column":10},"action":"insert","lines":["a"]},{"start":{"row":73,"column":10},"end":{"row":73,"column":11},"action":"insert","lines":["v"]},{"start":{"row":73,"column":11},"end":{"row":73,"column":12},"action":"insert","lines":["s"]}],[{"start":{"row":73,"column":12},"end":{"row":73,"column":13},"action":"insert","lines":[" "],"id":2825},{"start":{"row":73,"column":13},"end":{"row":73,"column":14},"action":"insert","lines":["="]}],[{"start":{"row":73,"column":14},"end":{"row":73,"column":15},"action":"insert","lines":[" "],"id":2826}],[{"start":{"row":76,"column":32},"end":{"row":76,"column":40},"action":"remove","lines":["print(y)"],"id":2827}],[{"start":{"row":75,"column":31},"end":{"row":75,"column":32},"action":"remove","lines":[":"],"id":2828}],[{"start":{"row":76,"column":22},"end":{"row":76,"column":23},"action":"remove","lines":[" "],"id":2829},{"start":{"row":76,"column":21},"end":{"row":76,"column":22},"action":"remove","lines":[" "]},{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"remove","lines":[" "]},{"start":{"row":76,"column":16},"end":{"row":76,"column":20},"action":"remove","lines":["    "]},{"start":{"row":76,"column":12},"end":{"row":76,"column":16},"action":"remove","lines":["    "]},{"start":{"row":76,"column":8},"end":{"row":76,"column":12},"action":"remove","lines":["    "]}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["f"],"id":2830},{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["o"]},{"start":{"row":76,"column":10},"end":{"row":76,"column":11},"action":"insert","lines":["r"]}],[{"start":{"row":76,"column":11},"end":{"row":76,"column":12},"action":"insert","lines":[" "],"id":2831},{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["f"]}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":14},"action":"insert","lines":[" "],"id":2832},{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["i"]},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["n"]}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[" "],"id":2833},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["f"]},{"start":{"row":76,"column":18},"end":{"row":76,"column":19},"action":"insert","lines":["a"]},{"start":{"row":76,"column":19},"end":{"row":76,"column":20},"action":"insert","lines":["v"]},{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"insert","lines":["s"]},{"start":{"row":76,"column":21},"end":{"row":76,"column":22},"action":"insert","lines":[":"]}],[{"start":{"row":76,"column":22},"end":{"row":76,"column":31},"action":"remove","lines":["         "],"id":2834},{"start":{"row":76,"column":22},"end":{"row":77,"column":0},"action":"insert","lines":["",""]},{"start":{"row":77,"column":0},"end":{"row":77,"column":12},"action":"insert","lines":["            "]},{"start":{"row":77,"column":12},"end":{"row":77,"column":13},"action":"insert","lines":["p"]},{"start":{"row":77,"column":13},"end":{"row":77,"column":14},"action":"insert","lines":["r"]},{"start":{"row":77,"column":14},"end":{"row":77,"column":15},"action":"insert","lines":["i"]},{"start":{"row":77,"column":15},"end":{"row":77,"column":16},"action":"insert","lines":["n"]},{"start":{"row":77,"column":16},"end":{"row":77,"column":17},"action":"insert","lines":["t"]}],[{"start":{"row":77,"column":17},"end":{"row":77,"column":19},"action":"insert","lines":["()"],"id":2835}],[{"start":{"row":77,"column":18},"end":{"row":77,"column":19},"action":"insert","lines":["f"],"id":2836}],[{"start":{"row":76,"column":4},"end":{"row":76,"column":8},"action":"remove","lines":["    "],"id":2837}],[{"start":{"row":77,"column":4},"end":{"row":77,"column":8},"action":"remove","lines":["    "],"id":2838}],[{"start":{"row":76,"column":4},"end":{"row":77,"column":16},"action":"remove","lines":["for f in favs:","        print(f)"],"id":2839}],[{"start":{"row":77,"column":4},"end":{"row":77,"column":5},"action":"insert","lines":["p"],"id":2840},{"start":{"row":77,"column":5},"end":{"row":77,"column":6},"action":"insert","lines":["r"]},{"start":{"row":77,"column":6},"end":{"row":77,"column":7},"action":"insert","lines":["i"]},{"start":{"row":77,"column":7},"end":{"row":77,"column":8},"action":"insert","lines":["n"]},{"start":{"row":77,"column":8},"end":{"row":77,"column":9},"action":"insert","lines":["t"]}],[{"start":{"row":77,"column":9},"end":{"row":77,"column":11},"action":"insert","lines":["()"],"id":2841}],[{"start":{"row":77,"column":10},"end":{"row":77,"column":11},"action":"insert","lines":["f"],"id":2842},{"start":{"row":77,"column":11},"end":{"row":77,"column":12},"action":"insert","lines":["a"]},{"start":{"row":77,"column":12},"end":{"row":77,"column":13},"action":"insert","lines":["v"]},{"start":{"row":77,"column":13},"end":{"row":77,"column":14},"action":"insert","lines":["s"]}],[{"start":{"row":77,"column":4},"end":{"row":78,"column":0},"action":"insert","lines":["",""],"id":2843},{"start":{"row":78,"column":0},"end":{"row":78,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":78,"column":4},"end":{"row":78,"column":8},"action":"insert","lines":["    "],"id":2844}],[{"start":{"row":77,"column":4},"end":{"row":77,"column":5},"action":"insert","lines":["f"],"id":2845},{"start":{"row":77,"column":5},"end":{"row":77,"column":6},"action":"insert","lines":["o"]},{"start":{"row":77,"column":6},"end":{"row":77,"column":7},"action":"insert","lines":["r"]}],[{"start":{"row":77,"column":7},"end":{"row":77,"column":8},"action":"insert","lines":[" "],"id":2846},{"start":{"row":77,"column":8},"end":{"row":77,"column":9},"action":"insert","lines":["f"]}],[{"start":{"row":77,"column":9},"end":{"row":77,"column":10},"action":"insert","lines":[" "],"id":2847},{"start":{"row":77,"column":10},"end":{"row":77,"column":11},"action":"insert","lines":["i"]},{"start":{"row":77,"column":11},"end":{"row":77,"column":12},"action":"insert","lines":["n"]}],[{"start":{"row":77,"column":12},"end":{"row":77,"column":13},"action":"insert","lines":[" "],"id":2848},{"start":{"row":77,"column":13},"end":{"row":77,"column":14},"action":"insert","lines":["f"]},{"start":{"row":77,"column":14},"end":{"row":77,"column":15},"action":"insert","lines":["a"]},{"start":{"row":77,"column":15},"end":{"row":77,"column":16},"action":"insert","lines":["v"]},{"start":{"row":77,"column":16},"end":{"row":77,"column":17},"action":"insert","lines":["s"]},{"start":{"row":77,"column":17},"end":{"row":77,"column":18},"action":"insert","lines":[":"]}],[{"start":{"row":78,"column":14},"end":{"row":78,"column":18},"action":"remove","lines":["favs"],"id":2849},{"start":{"row":78,"column":14},"end":{"row":78,"column":15},"action":"insert","lines":["f"]}],[{"start":{"row":78,"column":15},"end":{"row":78,"column":16},"action":"insert","lines":["."],"id":2850},{"start":{"row":78,"column":16},"end":{"row":78,"column":17},"action":"insert","lines":["_"]},{"start":{"row":78,"column":17},"end":{"row":78,"column":18},"action":"insert","lines":["i"]},{"start":{"row":78,"column":18},"end":{"row":78,"column":19},"action":"insert","lines":["d"]}],[{"start":{"row":77,"column":5},"end":{"row":78,"column":21},"action":"remove","lines":["or f in favs:","        print(f._id) "],"id":2851},{"start":{"row":77,"column":4},"end":{"row":77,"column":5},"action":"remove","lines":["f"]}],[{"start":{"row":76,"column":4},"end":{"row":76,"column":8},"action":"insert","lines":["    "],"id":2852}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["p"],"id":2853},{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["r"]},{"start":{"row":76,"column":10},"end":{"row":76,"column":11},"action":"insert","lines":["i"]},{"start":{"row":76,"column":11},"end":{"row":76,"column":12},"action":"insert","lines":["n"]},{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["t"]}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":15},"action":"insert","lines":["()"],"id":2854}],[{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["f"],"id":2855},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["a"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":["v"]},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["l"]},{"start":{"row":76,"column":18},"end":{"row":76,"column":19},"action":"insert","lines":["i"]},{"start":{"row":76,"column":19},"end":{"row":76,"column":20},"action":"insert","lines":["s"]}],[{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"insert","lines":["t"],"id":2856}],[{"start":{"row":71,"column":8},"end":{"row":71,"column":9},"action":"insert","lines":["n"],"id":2857},{"start":{"row":71,"column":9},"end":{"row":71,"column":10},"action":"insert","lines":["e"]},{"start":{"row":71,"column":10},"end":{"row":71,"column":11},"action":"insert","lines":["w"]}],[{"start":{"row":71,"column":11},"end":{"row":71,"column":12},"action":"insert","lines":[" "],"id":2858},{"start":{"row":71,"column":12},"end":{"row":71,"column":13},"action":"insert","lines":["="]}],[{"start":{"row":71,"column":13},"end":{"row":71,"column":14},"action":"insert","lines":[" "],"id":2859}],[{"start":{"row":74,"column":44},"end":{"row":74,"column":51},"action":"remove","lines":["favlist"],"id":2860},{"start":{"row":74,"column":44},"end":{"row":74,"column":45},"action":"insert","lines":["n"]},{"start":{"row":74,"column":45},"end":{"row":74,"column":46},"action":"insert","lines":["e"]},{"start":{"row":74,"column":46},"end":{"row":74,"column":47},"action":"insert","lines":["w"]}],[{"start":{"row":76,"column":14},"end":{"row":76,"column":21},"action":"remove","lines":["favlist"],"id":2861},{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["n"]},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["e"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":["w"]}],[{"start":{"row":76,"column":14},"end":{"row":76,"column":17},"action":"remove","lines":["new"],"id":2862},{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["f"]},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["a"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":["v"]},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["s"]}],[{"start":{"row":76,"column":8},"end":{"row":77,"column":0},"action":"insert","lines":["",""],"id":2863},{"start":{"row":77,"column":0},"end":{"row":77,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["f"],"id":2864},{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["o"]},{"start":{"row":76,"column":10},"end":{"row":76,"column":11},"action":"insert","lines":["r"]}],[{"start":{"row":76,"column":11},"end":{"row":76,"column":12},"action":"insert","lines":[" "],"id":2865},{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["x"]}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":14},"action":"insert","lines":[" "],"id":2866},{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["i"]},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["n"]}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[" "],"id":2867},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["f"]},{"start":{"row":76,"column":18},"end":{"row":76,"column":19},"action":"insert","lines":["a"]},{"start":{"row":76,"column":19},"end":{"row":76,"column":20},"action":"insert","lines":["v"]},{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"insert","lines":["s"]},{"start":{"row":76,"column":21},"end":{"row":76,"column":22},"action":"insert","lines":[":"]}],[{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"remove","lines":["x"],"id":2868}],[{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["f"],"id":2869}],[{"start":{"row":77,"column":8},"end":{"row":77,"column":12},"action":"insert","lines":["    "],"id":2870}],[{"start":{"row":77,"column":18},"end":{"row":77,"column":22},"action":"remove","lines":["favs"],"id":2871},{"start":{"row":77,"column":18},"end":{"row":77,"column":19},"action":"insert","lines":["f"]}],[{"start":{"row":77,"column":18},"end":{"row":77,"column":19},"action":"insert","lines":["l"],"id":2872},{"start":{"row":77,"column":19},"end":{"row":77,"column":20},"action":"insert","lines":["e"]},{"start":{"row":77,"column":20},"end":{"row":77,"column":21},"action":"insert","lines":["n"]},{"start":{"row":77,"column":21},"end":{"row":77,"column":22},"action":"insert","lines":["("]}],[{"start":{"row":77,"column":23},"end":{"row":77,"column":24},"action":"insert","lines":[")"],"id":2873}],[{"start":{"row":76,"column":8},"end":{"row":77,"column":25},"action":"remove","lines":["for f in favs:","            print(len(f))"],"id":2874},{"start":{"row":77,"column":22},"end":{"row":78,"column":25},"action":"insert","lines":["for f in favs:","            print(len(f))"]}],[{"start":{"row":77,"column":22},"end":{"row":78,"column":25},"action":"remove","lines":["for f in favs:","            print(len(f))"],"id":2875}],[{"start":{"row":74,"column":46},"end":{"row":74,"column":47},"action":"remove","lines":["w"],"id":2876},{"start":{"row":74,"column":45},"end":{"row":74,"column":46},"action":"remove","lines":["e"]},{"start":{"row":74,"column":44},"end":{"row":74,"column":45},"action":"remove","lines":["n"]}],[{"start":{"row":74,"column":44},"end":{"row":74,"column":45},"action":"insert","lines":["r"],"id":2877},{"start":{"row":74,"column":45},"end":{"row":74,"column":46},"action":"insert","lines":["e"]},{"start":{"row":74,"column":46},"end":{"row":74,"column":47},"action":"insert","lines":["c"]}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["p"],"id":2878},{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["r"]},{"start":{"row":76,"column":10},"end":{"row":76,"column":11},"action":"insert","lines":["i"]},{"start":{"row":76,"column":11},"end":{"row":76,"column":12},"action":"insert","lines":["n"]},{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["t"]},{"start":{"row":76,"column":13},"end":{"row":76,"column":14},"action":"insert","lines":[")"]}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":14},"action":"remove","lines":[")"],"id":2879}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":15},"action":"insert","lines":["()"],"id":2880}],[{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["f"],"id":2881},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["a"]},{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":["v"]},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["s"]}],[{"start":{"row":76,"column":8},"end":{"row":77,"column":0},"action":"insert","lines":["",""],"id":2882},{"start":{"row":77,"column":0},"end":{"row":77,"column":8},"action":"insert","lines":["        "]}],[{"start":{"row":77,"column":8},"end":{"row":77,"column":12},"action":"insert","lines":["    "],"id":2883}],[{"start":{"row":76,"column":8},"end":{"row":76,"column":9},"action":"insert","lines":["f"],"id":2884},{"start":{"row":76,"column":9},"end":{"row":76,"column":10},"action":"insert","lines":["o"]},{"start":{"row":76,"column":10},"end":{"row":76,"column":11},"action":"insert","lines":["r"]}],[{"start":{"row":76,"column":11},"end":{"row":76,"column":12},"action":"insert","lines":[" "],"id":2885},{"start":{"row":76,"column":12},"end":{"row":76,"column":13},"action":"insert","lines":["f"]}],[{"start":{"row":76,"column":13},"end":{"row":76,"column":14},"action":"insert","lines":[" "],"id":2886},{"start":{"row":76,"column":14},"end":{"row":76,"column":15},"action":"insert","lines":["i"]},{"start":{"row":76,"column":15},"end":{"row":76,"column":16},"action":"insert","lines":["n"]}],[{"start":{"row":76,"column":16},"end":{"row":76,"column":17},"action":"insert","lines":[" "],"id":2887},{"start":{"row":76,"column":17},"end":{"row":76,"column":18},"action":"insert","lines":["f"]},{"start":{"row":76,"column":18},"end":{"row":76,"column":19},"action":"insert","lines":["a"]},{"start":{"row":76,"column":19},"end":{"row":76,"column":20},"action":"insert","lines":["v"]},{"start":{"row":76,"column":20},"end":{"row":76,"column":21},"action":"insert","lines":["s"]},{"start":{"row":76,"column":21},"end":{"row":76,"column":22},"action":"insert","lines":[":"]}],[{"start":{"row":77,"column":18},"end":{"row":77,"column":22},"action":"remove","lines":["favs"],"id":2888},{"start":{"row":77,"column":18},"end":{"row":77,"column":19},"action":"insert","lines":["f"]}],[{"start":{"row":57,"column":4},"end":{"row":57,"column":6},"action":"insert","lines":["# "],"id":2889},{"start":{"row":58,"column":4},"end":{"row":58,"column":6},"action":"insert","lines":["# "]},{"start":{"row":59,"column":4},"end":{"row":59,"column":6},"action":"insert","lines":["# "]},{"start":{"row":60,"column":4},"end":{"row":60,"column":6},"action":"insert","lines":["# "]},{"start":{"row":61,"column":4},"end":{"row":61,"column":6},"action":"insert","lines":["# "]},{"start":{"row":62,"column":4},"end":{"row":62,"column":6},"action":"insert","lines":["# "]},{"start":{"row":63,"column":4},"end":{"row":63,"column":6},"action":"insert","lines":["# "]},{"start":{"row":64,"column":4},"end":{"row":64,"column":6},"action":"insert","lines":["# "]},{"start":{"row":68,"column":4},"end":{"row":68,"column":6},"action":"insert","lines":["# "]},{"start":{"row":69,"column":4},"end":{"row":69,"column":6},"action":"insert","lines":["# "]},{"start":{"row":70,"column":4},"end":{"row":70,"column":6},"action":"insert","lines":["# "]},{"start":{"row":71,"column":4},"end":{"row":71,"column":6},"action":"insert","lines":["# "]},{"start":{"row":72,"column":4},"end":{"row":72,"column":6},"action":"insert","lines":["# "]},{"start":{"row":73,"column":4},"end":{"row":73,"column":6},"action":"insert","lines":["# "]},{"start":{"row":74,"column":4},"end":{"row":74,"column":6},"action":"insert","lines":["# "]},{"start":{"row":75,"column":4},"end":{"row":75,"column":6},"action":"insert","lines":["# "]},{"start":{"row":76,"column":4},"end":{"row":76,"column":6},"action":"insert","lines":["# "]},{"start":{"row":77,"column":4},"end":{"row":77,"column":6},"action":"insert","lines":["# "]},{"start":{"row":80,"column":4},"end":{"row":80,"column":6},"action":"insert","lines":["# "]},{"start":{"row":83,"column":4},"end":{"row":83,"column":6},"action":"insert","lines":["# "]},{"start":{"row":84,"column":4},"end":{"row":84,"column":6},"action":"insert","lines":["# "]},{"start":{"row":87,"column":4},"end":{"row":87,"column":6},"action":"insert","lines":["# "]},{"start":{"row":92,"column":4},"end":{"row":92,"column":6},"action":"insert","lines":["# "]},{"start":{"row":93,"column":4},"end":{"row":93,"column":6},"action":"insert","lines":["# "]}],[{"start":{"row":98,"column":127},"end":{"row":98,"column":152},"action":"remove","lines":[", recommended=recommended"],"id":2890}],[{"start":{"row":317,"column":8},"end":{"row":317,"column":10},"action":"insert","lines":["# "],"id":2891}],[{"start":{"row":323,"column":79},"end":{"row":323,"column":96},"action":"remove","lines":["favourited_recipe"],"id":2892},{"start":{"row":323,"column":79},"end":{"row":323,"column":88},"action":"insert","lines":["recipe_id"]}],[{"start":{"row":323,"column":79},"end":{"row":323,"column":88},"action":"remove","lines":["recipe_id"],"id":2893},{"start":{"row":323,"column":79},"end":{"row":323,"column":98},"action":"insert","lines":["ObjectId(recipe_id)"]}],[{"start":{"row":320,"column":11},"end":{"row":320,"column":28},"action":"remove","lines":["favourited_recipe"],"id":2894},{"start":{"row":320,"column":11},"end":{"row":320,"column":30},"action":"insert","lines":["ObjectId(recipe_id)"]}],[{"start":{"row":347,"column":4},"end":{"row":347,"column":6},"action":"insert","lines":["# "],"id":2895}],[{"start":{"row":353,"column":75},"end":{"row":353,"column":88},"action":"remove","lines":["remove_recipe"],"id":2896},{"start":{"row":353,"column":75},"end":{"row":353,"column":94},"action":"insert","lines":["ObjectId(recipe_id)"]}],[{"start":{"row":350,"column":7},"end":{"row":350,"column":20},"action":"remove","lines":["remove_recipe"],"id":2897},{"start":{"row":350,"column":7},"end":{"row":350,"column":26},"action":"insert","lines":["ObjectId(recipe_id)"]}],[{"start":{"row":142,"column":55},"end":{"row":143,"column":51},"action":"remove","lines":[", ","                            recommended=recommended"],"id":2898}],[{"start":{"row":122,"column":4},"end":{"row":122,"column":6},"action":"insert","lines":["# "],"id":2899},{"start":{"row":123,"column":4},"end":{"row":123,"column":6},"action":"insert","lines":["# "]},{"start":{"row":124,"column":4},"end":{"row":124,"column":6},"action":"insert","lines":["# "]},{"start":{"row":125,"column":4},"end":{"row":125,"column":6},"action":"insert","lines":["# "]},{"start":{"row":126,"column":4},"end":{"row":126,"column":6},"action":"insert","lines":["# "]},{"start":{"row":127,"column":4},"end":{"row":127,"column":6},"action":"insert","lines":["# "]},{"start":{"row":128,"column":4},"end":{"row":128,"column":6},"action":"insert","lines":["# "]},{"start":{"row":129,"column":4},"end":{"row":129,"column":6},"action":"insert","lines":["# "]},{"start":{"row":130,"column":4},"end":{"row":130,"column":6},"action":"insert","lines":["# "]},{"start":{"row":131,"column":4},"end":{"row":131,"column":6},"action":"insert","lines":["# "]},{"start":{"row":132,"column":4},"end":{"row":132,"column":6},"action":"insert","lines":["# "]},{"start":{"row":133,"column":4},"end":{"row":133,"column":6},"action":"insert","lines":["# "]}],[{"start":{"row":281,"column":53},"end":{"row":281,"column":79},"action":"remove","lines":["'_id': ObjectId(recipe_id)"],"id":2900},{"start":{"row":281,"column":53},"end":{"row":281,"column":72},"action":"insert","lines":["ObjectId(recipe_id)"]}],[{"start":{"row":281,"column":52},"end":{"row":281,"column":53},"action":"remove","lines":["{"],"id":2901}],[{"start":{"row":281,"column":71},"end":{"row":281,"column":72},"action":"remove","lines":["}"],"id":2902}],[{"start":{"row":79,"column":2},"end":{"row":87,"column":20},"action":"remove","lines":["        ","    #         #  {\"$lookup\": {\"from\": \"table_2\", \"localField\": \"_id._id\", \"foreignField\": \"email\", as: \"details\"}}","","    ","    # # for x in recommended:","    # #     hello = x[\"_id\"]","        ","        ","    # #     print(x)"],"id":2903}],[{"start":{"row":79,"column":2},"end":{"row":85,"column":32},"action":"remove","lines":["","            ","    ","    ","    ","    # # for y in favs:","    # #     print(y.recipe_name)"],"id":2904},{"start":{"row":79,"column":1},"end":{"row":79,"column":2},"action":"remove","lines":[" "]}],[{"start":{"row":81,"column":0},"end":{"row":81,"column":1},"action":"remove","lines":[" "],"id":2905},{"start":{"row":80,"column":8},"end":{"row":81,"column":7},"action":"remove","lines":["","       "]},{"start":{"row":80,"column":4},"end":{"row":80,"column":8},"action":"remove","lines":["    "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"remove","lines":["    "]},{"start":{"row":79,"column":1},"end":{"row":80,"column":0},"action":"remove","lines":["",""]},{"start":{"row":79,"column":0},"end":{"row":79,"column":1},"action":"remove","lines":[" "]}],[{"start":{"row":80,"column":3},"end":{"row":81,"column":4},"action":"remove","lines":["","    "],"id":2906},{"start":{"row":80,"column":2},"end":{"row":80,"column":3},"action":"remove","lines":[" "]},{"start":{"row":80,"column":1},"end":{"row":80,"column":2},"action":"remove","lines":[" "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":1},"action":"remove","lines":[" "]},{"start":{"row":79,"column":0},"end":{"row":80,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":78,"column":27},"end":{"row":79,"column":0},"action":"remove","lines":["",""],"id":2907},{"start":{"row":78,"column":26},"end":{"row":78,"column":27},"action":"remove","lines":[" "]}],[{"start":{"row":296,"column":8},"end":{"row":297,"column":76},"action":"remove","lines":["# Identifies the recipe to be added to the user's favourite ","        # favourited_recipe = recipes.find_one({'_id': ObjectId(recipe_id)})"],"id":2908},{"start":{"row":296,"column":4},"end":{"row":296,"column":8},"action":"remove","lines":["    "]},{"start":{"row":296,"column":0},"end":{"row":296,"column":4},"action":"remove","lines":["    "]},{"start":{"row":295,"column":8},"end":{"row":296,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":295,"column":4},"end":{"row":295,"column":8},"action":"remove","lines":["    "],"id":2909},{"start":{"row":295,"column":0},"end":{"row":295,"column":4},"action":"remove","lines":["    "]},{"start":{"row":294,"column":46},"end":{"row":295,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":320,"column":4},"end":{"row":321,"column":0},"action":"insert","lines":["",""],"id":2910},{"start":{"row":321,"column":0},"end":{"row":321,"column":4},"action":"insert","lines":["    "]}]]},"ace":{"folds":[],"scrolltop":4875,"scrollleft":0,"selection":{"start":{"row":358,"column":31},"end":{"row":358,"column":31},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":337,"state":"start","mode":"ace/mode/python"}},"timestamp":1562867483305}